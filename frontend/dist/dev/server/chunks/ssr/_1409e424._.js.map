{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/components/seeds/FilterDropdown.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\n\ntype FilterOption = {\n  label: string;\n  value: string;\n};\n\ntype FilterDropdownProps = {\n  id: string;\n  label: string;\n  options: FilterOption[];\n  selected: string;\n  selectedValues?: string[];\n  open: boolean;\n  onToggle: (id: string) => void;\n  onSelect: (id: string, value: string) => void;\n  onToggleValue?: (id: string, value: string) => void;\n  placeholder?: string;\n  variant?: \"default\" | \"price\" | \"range\" | \"number\";\n  minPrice?: string;\n  maxPrice?: string;\n  onMinPriceChange?: (value: string) => void;\n  onMaxPriceChange?: (value: string) => void;\n  inputPrefix?: string;\n  inputSuffix?: string;\n  minLabel?: string;\n  maxLabel?: string;\n  multi?: boolean;\n};\n\nexport default function FilterDropdown({\n  id,\n  label,\n  options,\n  selected,\n  selectedValues = [],\n  open,\n  onToggle,\n  onSelect,\n  onToggleValue,\n  placeholder,\n  variant = \"default\",\n  minPrice,\n  maxPrice,\n  onMinPriceChange,\n  onMaxPriceChange,\n  inputPrefix,\n  inputSuffix,\n  minLabel,\n  maxLabel,\n  multi = false,\n}: FilterDropdownProps) {\n  const selectedLabel = useMemo(() => {\n    if (multi && selectedValues.length > 0) {\n      return `${label} (${selectedValues.length})`;\n    }\n    const found = options.find((option) => option.value === selected);\n    return found ? found.label : \"\";\n  }, [options, selected, selectedValues, multi, label]);\n\n  const isInputVariant = variant !== \"default\";\n  const isActive = isInputVariant\n    ? Boolean(minPrice || maxPrice)\n    : multi\n      ? selectedValues.length > 0\n      : Boolean(selected);\n  const buttonLabel = isInputVariant ? label : isActive ? selectedLabel || label : label;\n\n  const isPrice = variant === \"price\";\n  const isRange = variant === \"range\";\n  const isNumber = variant === \"number\";\n  const isInput = isPrice || isRange || isNumber;\n  const showMax = !isNumber;\n  const prefix = isPrice ? \"€\" : inputPrefix ?? \"\";\n  const suffix = inputSuffix ?? \"\";\n  const minTitle = minLabel ?? \"Minimum\";\n  const maxTitle = maxLabel ?? \"Maximum\";\n\n  return (\n    <div className=\"relative z-[120]\" data-no-reveal=\"true\">\n      <button\n        type=\"button\"\n        onClick={() => onToggle(id)}\n        className={`inline-flex items-center gap-2 rounded-full px-4 py-2 text-xs transition ${\n          isActive ? \"bg-pr_w text-pr_dg\" : \"bg-sr_dg text-pr_w\"\n        }`}\n      >\n        <span>{buttonLabel}</span>\n        <span className={`text-[10px] transition ${open ? \"rotate-180\" : \"\"}`}>\n          ⌄\n        </span>\n      </button>\n\n      <div\n        className={`absolute left-0 z-[130] mt-2 origin-top-left rounded-2xl bg-sr_dg p-3 text-xs text-pr_w shadow-lg transition ${\n          isInput ? \"w-64\" : \"w-44\"\n        } ${\n          open ? \"scale-100 opacity-100\" : \"pointer-events-none scale-95 opacity-0\"\n        }`}\n      >\n        {isInput ? (\n          <div className={`grid gap-4 ${showMax ? \"grid-cols-2\" : \"grid-cols-1\"}`}>\n            <div>\n              <p className=\"text-xs text-pr_w/80\">{minTitle}</p>\n              <div className=\"mt-2 flex items-center rounded-full bg-pr_w px-3 py-2\">\n                {prefix ? (\n                  <span className=\"text-sm font-semibold text-pr_dg\">{prefix}</span>\n                ) : null}\n                <input\n                  type=\"number\"\n                  inputMode=\"numeric\"\n                  min={0}\n                  value={minPrice ?? \"\"}\n                  onChange={(event) =>\n                    onMinPriceChange?.(event.target.value)\n                  }\n                  className=\"w-full bg-transparent px-2 text-sm font-semibold text-pr_dg outline-none placeholder:text-pr_dg/40\"\n                  placeholder=\"0\"\n                />\n                {suffix ? (\n                  <span className=\"text-sm font-semibold text-pr_dg\">{suffix}</span>\n                ) : null}\n              </div>\n            </div>\n            {showMax ? (\n              <div>\n                <p className=\"text-xs text-pr_w/80\">{maxTitle}</p>\n                <div className=\"mt-2 flex items-center rounded-full bg-pr_w px-3 py-2\">\n                  {prefix ? (\n                    <span className=\"text-sm font-semibold text-pr_dg\">{prefix}</span>\n                  ) : null}\n                  <input\n                    type=\"number\"\n                    inputMode=\"numeric\"\n                    min={0}\n                    value={maxPrice ?? \"\"}\n                    onChange={(event) =>\n                      onMaxPriceChange?.(event.target.value)\n                    }\n                    className=\"w-full bg-transparent px-2 text-sm font-semibold text-pr_dg outline-none placeholder:text-pr_dg/40\"\n                    placeholder=\"500\"\n                  />\n                  {suffix ? (\n                    <span className=\"text-sm font-semibold text-pr_dg\">{suffix}</span>\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n          </div>\n        ) : (\n          <>\n            {!multi ? (\n              <button\n                type=\"button\"\n                className=\"w-full rounded-lg px-3 py-2 text-left text-pr_w/70 hover:bg-pr_w/10\"\n                onClick={() => onSelect(id, \"\")}\n              >\n                {placeholder ?? \"Any\"}\n              </button>\n            ) : null}\n            {options.map((option) => {\n              const isSelected = multi\n                ? selectedValues.includes(option.value)\n                : option.value === selected;\n              return (\n                <button\n                  key={option.value}\n                  type=\"button\"\n                  className={`flex w-full items-center justify-between rounded-lg px-3 py-2 text-left transition ${\n                    isSelected ? \"bg-pr_w/15\" : \"hover:bg-pr_w/10\"\n                  }`}\n                  onClick={() =>\n                    multi\n                      ? onToggleValue?.(id, option.value)\n                      : onSelect(id, option.value)\n                  }\n                >\n                  <span>{option.label}</span>\n                  {multi && isSelected ? <span>✓</span> : null}\n                </button>\n              );\n            })}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/components/ui/Button.tsx"],"sourcesContent":["import type { ButtonHTMLAttributes } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ntype ButtonVariant = \"header\" | \"contact\" | \"primary\" | \"category\";\n\ntype ButtonProps = ButtonHTMLAttributes<HTMLButtonElement> & {\n  variant?: ButtonVariant;\n};\n\nconst baseStyles =\n  \"inline-flex items-center justify-center rounded-full px-5 py-2 text-sm font-medium transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60\";\n\nconst variants: Record<ButtonVariant, string> = {\n  header: \"bg-white text-pr_dg hover:bg-white/90\",\n  contact: \"bg-pr_dg text-white hover:bg-pr_dg/90\",\n  primary: \"bg-pr_dg text-white hover:bg-pr_dg/90\",\n  category: \"bg-pr_y text-pr_dg hover:bg-pr_y/90\",\n};\n\nexport default function Button({\n  variant = \"primary\",\n  className,\n  type = \"button\",\n  ...props\n}: ButtonProps) {\n  return (\n    <button\n      type={type}\n      className={cn(baseStyles, variants[variant], className)}\n      {...props}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;AAQA,MAAM,aACJ;AAEF,MAAM,WAA0C;IAC9C,QAAQ;IACR,SAAS;IACT,SAAS;IACT,UAAU;AACZ;AAEe,SAAS,OAAO,EAC7B,UAAU,SAAS,EACnB,SAAS,EACT,OAAO,QAAQ,EACf,GAAG,OACS;IACZ,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,IAAA,kHAAE,EAAC,YAAY,QAAQ,CAAC,QAAQ,EAAE;QAC5C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/lib/apiClient.ts"],"sourcesContent":["import {\n  clearTokens,\n  getAccessToken,\n  getRefreshToken,\n  setAccessToken,\n  setRefreshToken,\n} from \"@/lib/authTokens\";\n\nconst API_BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ?? process.env.NEXT_PUBLIC_API_URL ?? \"\";\n\ntype AuthTokenPair = {\n  accessToken?: string;\n  refreshToken?: string;\n};\n\nfunction getStringToken(\n  source: Record<string, unknown> | undefined,\n  keys: string[],\n) {\n  if (!source) return undefined;\n  for (const key of keys) {\n    const value = source[key];\n    if (typeof value === \"string\" && value.trim()) return value;\n  }\n  return undefined;\n}\n\nfunction extractAuthTokens(payload: unknown): AuthTokenPair {\n  if (!payload || typeof payload !== \"object\") return {};\n\n  const root = payload as Record<string, unknown>;\n  const data =\n    root.data && typeof root.data === \"object\"\n      ? (root.data as Record<string, unknown>)\n      : undefined;\n  const rootTokens =\n    root.tokens && typeof root.tokens === \"object\"\n      ? (root.tokens as Record<string, unknown>)\n      : undefined;\n  const dataTokens =\n    data?.tokens && typeof data.tokens === \"object\"\n      ? (data.tokens as Record<string, unknown>)\n      : undefined;\n\n  const accessToken =\n    getStringToken(root, [\"accessToken\", \"access_token\"]) ||\n    getStringToken(data, [\"accessToken\", \"access_token\"]) ||\n    getStringToken(rootTokens, [\"accessToken\", \"access_token\"]) ||\n    getStringToken(dataTokens, [\"accessToken\", \"access_token\"]);\n\n  const refreshToken =\n    getStringToken(root, [\"refreshToken\", \"refresh_token\"]) ||\n    getStringToken(data, [\"refreshToken\", \"refresh_token\"]) ||\n    getStringToken(rootTokens, [\"refreshToken\", \"refresh_token\"]) ||\n    getStringToken(dataTokens, [\"refreshToken\", \"refresh_token\"]);\n\n  return { accessToken, refreshToken };\n}\n\nfunction buildCandidateUrls(path: string) {\n  if (API_BASE_URL) return [`${API_BASE_URL}${path}`];\n  return [path];\n}\n\nasync function fetchWithFallback(\n  path: string,\n  init: RequestInit,\n  retryOnProxyError = true,\n) {\n  const urls = buildCandidateUrls(path);\n  let lastError: unknown;\n\n  for (let index = 0; index < urls.length; index += 1) {\n    const url = urls[index];\n    try {\n      const response = await fetch(url, init);\n      if (retryOnProxyError && response.status >= 500 && index < urls.length - 1) {\n        continue;\n      }\n\n      return response;\n    } catch (error) {\n      lastError = error;\n      const hasNext = index < urls.length - 1;\n      if (hasNext) continue;\n      throw error;\n    }\n  }\n\n  if (lastError instanceof Error) {\n    throw lastError;\n  }\n  throw new Error(\"Failed to fetch\");\n}\n\ntype ApiFetchOptions = {\n  onUnauthorized?: () => void;\n};\n\nexport async function apiFetch(\n  input: RequestInfo,\n  init: RequestInit = {},\n  options: ApiFetchOptions = {},\n) {\n  if (typeof input !== \"string\") {\n    throw new Error(\"apiFetch currently expects a string path input\");\n  }\n\n  const accessToken = getAccessToken();\n  const headers = new Headers(init.headers || {});\n\n  if (accessToken) {\n    headers.set(\"Authorization\", `Bearer ${accessToken}`);\n  }\n\n  const response = await fetchWithFallback(input, {\n    ...init,\n    headers,\n  });\n\n  if (response.status !== 401) return response;\n\n  const refreshToken = getRefreshToken();\n  if (!refreshToken) {\n    clearTokens();\n    options.onUnauthorized?.();\n    return response;\n  }\n\n  const refreshResponse = await fetchWithFallback(\n    \"/auth/refresh\",\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      // Support both backend payload variants while keeping backward compatibility.\n      body: JSON.stringify({ refreshToken, token: refreshToken }),\n    },\n    true,\n  );\n\n  if (!refreshResponse.ok) {\n    clearTokens();\n    options.onUnauthorized?.();\n    return response;\n  }\n\n  const data = extractAuthTokens(await refreshResponse.json().catch(() => ({})));\n  if (data?.accessToken) {\n    setAccessToken(data.accessToken);\n    headers.set(\"Authorization\", `Bearer ${data.accessToken}`);\n  } else {\n    clearTokens();\n    options.onUnauthorized?.();\n    return response;\n  }\n  if (data?.refreshToken) {\n    setRefreshToken(data.refreshToken);\n  }\n\n  return fetchWithFallback(input, {\n    ...init,\n    headers,\n  });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/services/cart.ts"],"sourcesContent":["import { apiFetch } from \"@/lib/apiClient\";\n\nexport type CartProduct = {\n  slug: string;\n  name: string;\n  priceCents: number;\n  currency: string;\n  stockQty: number;\n  images?: Array<{ id?: string; url: string }>;\n};\n\nexport type CartItem = {\n  product: CartProduct;\n  qty: number;\n  lineTotal: number;\n};\n\nexport type CartResponse = {\n  id: string;\n  items: CartItem[];\n  subtotalCents: number;\n};\n\ntype ApiError = Error & { status?: number };\n\nfunction buildApiError(\n  fallbackMessage: string,\n  status: number,\n  payload?: { message?: string; error?: string },\n) {\n  const error = new Error(\n    payload?.message || payload?.error || fallbackMessage,\n  ) as ApiError;\n  error.status = status;\n  return error;\n}\n\nfunction ensureProductSlug(productSlug: string) {\n  return productSlug.trim();\n}\n\nexport async function fetchCart() {\n  const response = await apiFetch(\"/cart\");\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw buildApiError(\"Failed to load cart\", response.status, error);\n  }\n  return (await response.json()) as CartResponse;\n}\n\nexport async function addCartItem(productSlug: string, qty = 1) {\n  const normalizedProductSlug = ensureProductSlug(productSlug);\n  if (!normalizedProductSlug) {\n    throw buildApiError(\"Product is unavailable\", 400);\n  }\n\n  const normalizedQty = Math.max(1, Math.trunc(qty || 1));\n  const response = await apiFetch(\"/cart/items\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      // Keep both keys for backend compatibility while migration settles.\n      productId: normalizedProductSlug,\n      productSlug: normalizedProductSlug,\n      qty: normalizedQty,\n    }),\n  });\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw buildApiError(\"Failed to add item\", response.status, error);\n  }\n\n  return response.json() as Promise<{ success: boolean }>;\n}\n\nexport async function updateCartItem(productSlug: string, qty: number) {\n  const normalizedProductSlug = ensureProductSlug(productSlug);\n  if (!normalizedProductSlug) {\n    throw buildApiError(\"Product slug is required\", 400);\n  }\n  const response = await apiFetch(\n    `/cart/items/${encodeURIComponent(normalizedProductSlug)}`,\n    {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ qty }),\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw buildApiError(\"Failed to update item\", response.status, error);\n  }\n  return response.json() as Promise<{ success: boolean }>;\n}\n\nexport async function removeCartItem(productSlug: string) {\n  const normalizedProductSlug = ensureProductSlug(productSlug);\n  if (!normalizedProductSlug) {\n    throw buildApiError(\"Product slug is required\", 400);\n  }\n  const response = await apiFetch(\n    `/cart/items/${encodeURIComponent(normalizedProductSlug)}`,\n    {\n      method: \"DELETE\",\n    },\n  );\n\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw buildApiError(\"Failed to remove item\", response.status, error);\n  }\n  return response.json() as Promise<{ success: boolean }>;\n}\n\nexport async function clearCart() {\n  const response = await apiFetch(\"/cart\", {\n    method: \"DELETE\",\n  });\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw buildApiError(\"Failed to clear cart\", response.status, error);\n  }\n  return response.json() as Promise<{ success: boolean }>;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAyBA,SAAS,cACP,eAAuB,EACvB,MAAc,EACd,OAA8C;IAE9C,MAAM,QAAQ,IAAI,MAChB,SAAS,WAAW,SAAS,SAAS;IAExC,MAAM,MAAM,GAAG;IACf,OAAO;AACT;AAEA,SAAS,kBAAkB,WAAmB;IAC5C,OAAO,YAAY,IAAI;AACzB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,4HAAQ,EAAC;IAChC,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,cAAc,uBAAuB,SAAS,MAAM,EAAE;IAC9D;IACA,OAAQ,MAAM,SAAS,IAAI;AAC7B;AAEO,eAAe,YAAY,WAAmB,EAAE,MAAM,CAAC;IAC5D,MAAM,wBAAwB,kBAAkB;IAChD,IAAI,CAAC,uBAAuB;QAC1B,MAAM,cAAc,0BAA0B;IAChD;IAEA,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,OAAO;IACpD,MAAM,WAAW,MAAM,IAAA,4HAAQ,EAAC,eAAe;QAC7C,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YACnB,oEAAoE;YACpE,WAAW;YACX,aAAa;YACb,KAAK;QACP;IACF;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,cAAc,sBAAsB,SAAS,MAAM,EAAE;IAC7D;IAEA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,eAAe,WAAmB,EAAE,GAAW;IACnE,MAAM,wBAAwB,kBAAkB;IAChD,IAAI,CAAC,uBAAuB;QAC1B,MAAM,cAAc,4BAA4B;IAClD;IACA,MAAM,WAAW,MAAM,IAAA,4HAAQ,EAC7B,CAAC,YAAY,EAAE,mBAAmB,wBAAwB,EAC1D;QACE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;QAAI;IAC7B;IAGF,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,cAAc,yBAAyB,SAAS,MAAM,EAAE;IAChE;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,eAAe,WAAmB;IACtD,MAAM,wBAAwB,kBAAkB;IAChD,IAAI,CAAC,uBAAuB;QAC1B,MAAM,cAAc,4BAA4B;IAClD;IACA,MAAM,WAAW,MAAM,IAAA,4HAAQ,EAC7B,CAAC,YAAY,EAAE,mBAAmB,wBAAwB,EAC1D;QACE,QAAQ;IACV;IAGF,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,cAAc,yBAAyB,SAAS,MAAM,EAAE;IAChE;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,IAAA,4HAAQ,EAAC,SAAS;QACvC,QAAQ;IACV;IACA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACnD,MAAM,cAAc,wBAAwB,SAAS,MAAM,EAAE;IAC/D;IACA,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/components/cart/AddToCartButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport Button from \"@/components/ui/Button\";\nimport { addCartItem } from \"@/services/cart\";\nimport { useAuth } from \"@/components/auth/AuthProvider\";\n\ntype AddToCartButtonProps = {\n  productId?: string;\n  qty?: number;\n  label?: string;\n  variant?: \"header\" | \"contact\" | \"primary\" | \"category\";\n  className?: string;\n};\n\nexport default function AddToCartButton({\n  productId,\n  qty = 1,\n  label = \"Add to Cart +\",\n  variant = \"category\",\n  className,\n}: AddToCartButtonProps) {\n  const disableAuth = process.env.NEXT_PUBLIC_DISABLE_AUTH === \"true\";\n  const router = useRouter();\n  const pathname = usePathname();\n  const { isAuthenticated, isInitializing } = useAuth();\n  const [loading, setLoading] = useState(false);\n  const [justAdded, setJustAdded] = useState(false);\n  const [failed, setFailed] = useState(false);\n\n  const handleClick = async () => {\n    if (isInitializing) return;\n    if (!productId) return;\n    if (!isAuthenticated && !disableAuth) {\n      router.push(`/signin?next=${encodeURIComponent(pathname ?? \"/\")}`);\n      return;\n    }\n    try {\n      setLoading(true);\n      setFailed(false);\n      await addCartItem(productId, qty);\n      setJustAdded(true);\n      setTimeout(() => setJustAdded(false), 1500);\n    } catch (error) {\n      setJustAdded(false);\n      const status =\n        typeof error === \"object\" &&\n        error !== null &&\n        \"status\" in error &&\n        typeof (error as { status?: unknown }).status === \"number\"\n          ? ((error as { status: number }).status ?? 0)\n          : 0;\n\n      if ((status === 401 || status === 403) && !disableAuth) {\n        router.push(`/signin?next=${encodeURIComponent(pathname ?? \"/\")}`);\n        return;\n      }\n\n      setFailed(true);\n      setTimeout(() => setFailed(false), 1500);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Button\n      variant={variant}\n      className={className}\n      disabled={loading || !productId || isInitializing}\n      onClick={handleClick}\n      type=\"button\"\n    >\n      {loading\n        ? \"Adding...\"\n        : isInitializing\n          ? \"Checking...\"\n          : justAdded\n            ? \"Added\"\n            : failed\n              ? \"Try again\"\n              : label}\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAgBe,SAAS,gBAAgB,EACtC,SAAS,EACT,MAAM,CAAC,EACP,QAAQ,eAAe,EACvB,UAAU,UAAU,EACpB,SAAS,EACY;IACrB,MAAM,cAAc,8CAAyC;IAC7D,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,EAAE,eAAe,EAAE,cAAc,EAAE,GAAG,IAAA,8IAAO;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,cAAc;QAClB,IAAI,gBAAgB;QACpB,IAAI,CAAC,WAAW;QAChB,IAAI,CAAC,mBAAmB,CAAC,aAAa;YACpC,OAAO,IAAI,CAAC,CAAC,aAAa,EAAE,mBAAmB,YAAY,MAAM;YACjE;QACF;QACA,IAAI;YACF,WAAW;YACX,UAAU;YACV,MAAM,IAAA,+HAAW,EAAC,WAAW;YAC7B,aAAa;YACb,WAAW,IAAM,aAAa,QAAQ;QACxC,EAAE,OAAO,OAAO;YACd,aAAa;YACb,MAAM,SACJ,OAAO,UAAU,YACjB,UAAU,QACV,YAAY,SACZ,OAAO,AAAC,MAA+B,MAAM,KAAK,WAC7C,AAAC,MAA6B,MAAM,IAAI,IACzC;YAEN,IAAI,CAAC,WAAW,OAAO,WAAW,GAAG,KAAK,CAAC,aAAa;gBACtD,OAAO,IAAI,CAAC,CAAC,aAAa,EAAE,mBAAmB,YAAY,MAAM;gBACjE;YACF;YAEA,UAAU;YACV,WAAW,IAAM,UAAU,QAAQ;QACrC,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC,sIAAM;QACL,SAAS;QACT,WAAW;QACX,UAAU,WAAW,CAAC,aAAa;QACnC,SAAS;QACT,MAAK;kBAEJ,UACG,cACA,iBACE,gBACA,YACE,UACA,SACE,cACA;;;;;;AAGhB"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/components/ui/ProductCard.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport AddToCartButton from \"@/components/cart/AddToCartButton\";\nimport { cn } from \"@/lib/utils\";\n\ntype NewProductCardProps = {\n  title: string;\n  description: string;\n  price: string;\n  isNew?: boolean;\n  badgeLabel?: string;\n  badgeClassName?: string;\n  href?: string;\n  showButton?: boolean;\n  imageUrl?: string;\n  productId?: string;\n};\n\nexport default function ProductCard({\n  title,\n  description,\n  price,\n  isNew = true,\n  badgeLabel = \"New!\",\n  badgeClassName = \"bg-pr_y text-pr_dg\",\n  href,\n  showButton = true,\n  imageUrl,\n  productId,\n}: NewProductCardProps) {\n  const resolvedHref = href ?? (productId ? `/products/${productId}` : undefined);\n  const content = (\n    <>\n      <div className=\"relative\">\n        {isNew && (\n          <span\n            className={cn(\n              \"absolute right-4 top-4 rounded-full px-3 py-1 text-xs font-semibold\",\n              badgeClassName,\n            )}\n          >\n            {badgeLabel}\n          </span>\n        )}\n        {imageUrl ? (\n          <img\n            src={imageUrl}\n            alt={title}\n            className=\"h-[400px] w-full rounded-2xl object-cover\"\n          />\n        ) : (\n          <div className=\"h-[400px] rounded-2xl bg-pr_w/60\" />\n        )}\n      </div>\n\n      <div className=\"mt-4 flex flex-1 flex-col\">\n        <h3 className=\"text-base font-semibold text-pr_w\">{title}</h3>\n        <p className=\"mt-1 text-sm text-pr_w/70 line-clamp-2\">{description}</p>\n        <p className=\"mt-2 text-lg font-semibold text-pr_w\">{price}</p>\n      </div>\n    </>\n  );\n\n  return (\n    <div className=\"flex h-full flex-col\">\n      {resolvedHref ? (\n        <Link href={resolvedHref} className=\"flex flex-1 flex-col\">\n          {content}\n        </Link>\n      ) : (\n        content\n      )}\n      {showButton && (\n        <AddToCartButton\n          productId={productId}\n          className=\"mt-3 w-full\"\n          variant=\"category\"\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAee,SAAS,YAAY,EAClC,KAAK,EACL,WAAW,EACX,KAAK,EACL,QAAQ,IAAI,EACZ,aAAa,MAAM,EACnB,iBAAiB,oBAAoB,EACrC,IAAI,EACJ,aAAa,IAAI,EACjB,QAAQ,EACR,SAAS,EACW;IACpB,MAAM,eAAe,QAAQ,CAAC,YAAY,CAAC,UAAU,EAAE,WAAW,GAAG,SAAS;IAC9E,MAAM,wBACJ;;0BACE,8OAAC;gBAAI,WAAU;;oBACZ,uBACC,8OAAC;wBACC,WAAW,IAAA,kHAAE,EACX,uEACA;kCAGD;;;;;;oBAGJ,yBACC,8OAAC;wBACC,KAAK;wBACL,KAAK;wBACL,WAAU;;;;;6CAGZ,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAInB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,8OAAC;wBAAE,WAAU;kCAA0C;;;;;;kCACvD,8OAAC;wBAAE,WAAU;kCAAwC;;;;;;;;;;;;;;IAK3D,qBACE,8OAAC;QAAI,WAAU;;YACZ,6BACC,8OAAC,uKAAI;gBAAC,MAAM;gBAAc,WAAU;0BACjC;;;;;uBAGH;YAED,4BACC,8OAAC,iJAAe;gBACd,WAAW;gBACX,WAAU;gBACV,SAAQ;;;;;;;;;;;;AAKlB"}},
    {"offset": {"line": 699, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/services/categories.ts"],"sourcesContent":["export type CategoryFilter = {\n  name: string;\n  slug: string;\n  type: \"select\" | \"multi\" | \"boolean\" | \"number\" | \"range\" | string;\n  options?: Array<{ value: string }>;\n};\n\nexport type CategoryItem = {\n  id?: string;\n  name: string;\n  slug: string;\n  description?: string;\n  filters?: CategoryFilter[];\n};\n\nconst API_BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ?? process.env.NEXT_PUBLIC_API_URL ?? \"\";\n\nfunction getBaseUrl() {\n  return API_BASE_URL;\n}\n\nexport async function fetchCategories(): Promise<CategoryItem[]> {\n  const response = await fetch(`${getBaseUrl()}/categories`);\n  if (!response.ok) {\n    throw new Error(\"Failed to load categories\");\n  }\n  const data = (await response.json()) as CategoryItem[];\n  return Array.isArray(data) ? data : [];\n}\n\nexport async function fetchCategoryFilters(\n  slug: string,\n): Promise<CategoryFilter[]> {\n  if (!slug) return [];\n  const response = await fetch(`${getBaseUrl()}/categories/${slug}/filters`);\n  if (!response.ok) {\n    throw new Error(\"Failed to load category filters\");\n  }\n  const data = (await response.json()) as CategoryFilter[];\n  return Array.isArray(data) ? data : [];\n}\n"],"names":[],"mappings":";;;;;;AAeA,MAAM,eACJ,iFAAwC,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAE7E,SAAS;IACP,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,WAAW,CAAC;IACzD,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAQ,MAAM,SAAS,IAAI;IACjC,OAAO,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;AACxC;AAEO,eAAe,qBACpB,IAAY;IAEZ,IAAI,CAAC,MAAM,OAAO,EAAE;IACpB,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,YAAY,EAAE,KAAK,QAAQ,CAAC;IACzE,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,IAAI,MAAM;IAClB;IACA,MAAM,OAAQ,MAAM,SAAS,IAAI;IACjC,OAAO,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;AACxC"}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/services/products.ts"],"sourcesContent":["export type ProductImage = {\n  id?: string;\n  url: string;\n  sortOrder: number;\n};\n\nexport type ProductCategory = {\n  id?: string;\n  name?: string;\n  slug?: string;\n};\n\nexport type ProductListItem = {\n  id: string;\n  slug?: string;\n  name: string;\n  content?: {\n    description?: string;\n    subtitle?: string;\n    facts?: {\n      yield?: string;\n      seedType?: string;\n      thcLevel?: string;\n      flavorAroma?: string;\n      floweringCycle?: string;\n      [key: string]: string | undefined;\n    };\n    effects?: string[];\n    variants?: Array<{ label?: string; priceCents?: number }>;\n    geneticBalance?: Record<string, number | undefined>;\n  };\n  priceCents: number;\n  currency: string;\n  stockQty?: number;\n  images?: ProductImage[];\n  category?: ProductCategory;\n  soldCount?: number;\n  ratingAvg?: number;\n  reviewCount?: number;\n  filters?: Record<string, string>;\n  createdAt?: string;\n  updatedAt?: string;\n};\n\nexport type ProductListResponse = {\n  page: number;\n  limit: number;\n  total: number;\n  items: ProductListItem[];\n};\n\nexport type ProductDetails = ProductListItem & {\n  content?: {\n    description?: string;\n    keyFacts?: string[];\n    sections?: Array<{ title: string; text: string }>;\n    subtitle?: string;\n    facts?: {\n      yield?: string;\n      seedType?: string;\n      thcLevel?: string;\n      flavorAroma?: string;\n      floweringCycle?: string;\n    };\n    effects?: string[];\n    variants?: Array<{ label: string; priceCents: number }>;\n    geneticBalance?: {\n      indica?: number;\n      sativa?: number;\n      [key: string]: number | undefined;\n    };\n  };\n  createdAt?: string;\n  updatedAt?: string;\n};\n\nexport type ProductQuery = {\n  page: number;\n  limit: number;\n  q?: string;\n  category?: string;\n  minPrice?: number;\n  maxPrice?: number;\n  sort?: string;\n  filters?: Record<string, string | number | undefined>;\n};\n\nconst API_BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL ?? process.env.NEXT_PUBLIC_API_URL ?? \"\";\n\nfunction getBaseUrl() {\n  return API_BASE_URL;\n}\n\nexport function formatPrice(priceCents: number, currency = \"EUR\") {\n  return new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency,\n  }).format(priceCents / 100);\n}\n\ntype FetchInit = RequestInit & {\n  next?: { revalidate?: number };\n};\n\ntype RawImage =\n  | string\n  | {\n      id?: string;\n      url?: string;\n      src?: string;\n      path?: string;\n      sortOrder?: number;\n      order?: number;\n    };\n\ntype RawProduct = {\n  id?: string;\n  _id?: string;\n  uuid?: string;\n  productId?: string;\n  product_id?: string;\n  product?: { id?: string; uuid?: string };\n  slug?: string;\n  name?: string;\n  title?: string;\n  content?: {\n    description?: string;\n    keyFacts?: string[];\n    sections?: Array<{ title?: string; text?: string }>;\n    subtitle?: string;\n    facts?: {\n      yield?: string;\n      seedType?: string;\n      thcLevel?: string;\n      flavorAroma?: string;\n      floweringCycle?: string;\n      [key: string]: string | undefined;\n    };\n    effects?: string[];\n    variants?: Array<{ label?: string; priceCents?: number }>;\n    geneticBalance?: Record<string, number | undefined>;\n  };\n  description?: string;\n  shortDescription?: string;\n  summary?: string;\n  priceCents?: number;\n  price?: number | string;\n  currency?: string;\n  stockQty?: number;\n  stock?: number;\n  images?: RawImage[];\n  image?: string;\n  category?:\n    | ProductCategory\n    | string\n    | { name?: string; slug?: string; id?: string };\n  soldCount?: number;\n  sold?: number;\n  ratingAvg?: number;\n  rating?: number;\n  reviewCount?: number;\n  reviews?: number;\n  filters?: Record<string, string>;\n  createdAt?: string;\n  updatedAt?: string;\n};\n\nfunction getFilterValue(\n  filters: Record<string, string> | undefined,\n  keys: string[],\n) {\n  if (!filters) return undefined;\n  const entries = Object.entries(filters);\n  const match = entries.find(([key]) =>\n    keys.some((candidate) => key.toLowerCase() === candidate.toLowerCase()),\n  );\n  const value = match?.[1]?.trim();\n  return value || undefined;\n}\n\nfunction getFirstNumericValue(value?: string) {\n  if (!value) return undefined;\n  const match = value.match(/-?\\d+(\\.\\d+)?/);\n  if (!match) return undefined;\n  const parsed = Number(match[0]);\n  return Number.isFinite(parsed) ? parsed : undefined;\n}\n\nfunction normalizeFactsFromFilters(filters?: Record<string, string>) {\n  if (!filters) return undefined;\n\n  const thcLevel = getFilterValue(filters, [\"THC %\", \"THC\"]);\n  const yieldValue = getFilterValue(filters, [\"Yield g/m²\", \"Yield\"]);\n  const floweringCycle = getFilterValue(filters, [\n    \"Seed to Harvest (weeks)\",\n    \"Flowering Cycle\",\n    \"Cycle\",\n  ]);\n  const seedType = getFilterValue(filters, [\"Seed Type\", \"Type\"]);\n\n  if (!thcLevel && !yieldValue && !floweringCycle && !seedType) {\n    return undefined;\n  }\n\n  return {\n    thcLevel,\n    yield: yieldValue,\n    floweringCycle,\n    seedType,\n  };\n}\n\nfunction normalizeGeneticBalanceFromFilters(filters?: Record<string, string>) {\n  if (!filters) return undefined;\n\n  const indica = getFirstNumericValue(\n    getFilterValue(filters, [\"Indica %\", \"Indica\"]),\n  );\n  const sativa = getFirstNumericValue(\n    getFilterValue(filters, [\"Sativa %\", \"Sativa\"]),\n  );\n\n  if (indica === undefined && sativa === undefined) {\n    return undefined;\n  }\n\n  return {\n    ...(indica !== undefined ? { indica, ba: indica } : {}),\n    ...(sativa !== undefined ? { sativa, abo: sativa } : {}),\n  };\n}\n\nfunction normalizeCurrency(raw: RawProduct) {\n  return raw.currency || \"EUR\";\n}\n\nfunction normalizePriceCents(raw: RawProduct) {\n  if (typeof raw.priceCents === \"number\") return raw.priceCents;\n\n  if (typeof raw.price === \"number\") {\n    if (raw.price > 1000) return Math.round(raw.price);\n    return Math.round(raw.price * 100);\n  }\n\n  if (typeof raw.price === \"string\") {\n    const numeric = Number(raw.price.replace(/[^0-9.]/g, \"\"));\n    if (!Number.isFinite(numeric)) return 0;\n    if (numeric > 1000) return Math.round(numeric);\n    return Math.round(numeric * 100);\n  }\n\n  return 0;\n}\n\nfunction normalizeImages(images?: RawImage[], fallback?: string) {\n  const rawImages = images ?? (fallback ? [fallback] : []);\n  return rawImages\n    .map((image, index) => {\n      if (typeof image === \"string\") {\n        return {\n          id: `${index}`,\n          url: image,\n          sortOrder: index,\n        } as ProductImage;\n      }\n      const url = image.url || image.src || image.path;\n      if (!url) return null;\n      return {\n        id: image.id ?? `${index}`,\n        url,\n        sortOrder:\n          typeof image.sortOrder === \"number\"\n            ? image.sortOrder\n            : typeof image.order === \"number\"\n              ? image.order\n              : index,\n      } as ProductImage;\n    })\n    .filter(Boolean) as ProductImage[];\n}\n\nfunction normalizeCategory(raw: RawProduct): ProductCategory | undefined {\n  if (!raw.category) return undefined;\n  if (typeof raw.category === \"string\") {\n    return { name: raw.category, slug: raw.category };\n  }\n  return {\n    id: raw.category.id,\n    name: raw.category.name,\n    slug: raw.category.slug,\n  };\n}\n\nfunction normalizeContent(raw: RawProduct) {\n  const description =\n    raw.content?.description ||\n    raw.description ||\n    raw.shortDescription ||\n    raw.summary;\n  const subtitle = raw.content?.subtitle;\n  const keyFacts = raw.content?.keyFacts;\n  const sections = raw.content?.sections\n    ?.filter((section) => section.title || section.text)\n    .map((section) => ({\n      title: section.title ?? \"Details\",\n      text: section.text ?? \"\",\n    }));\n  const facts = raw.content?.facts;\n  const effects = raw.content?.effects;\n  const variants = raw.content?.variants?.filter((variant) => variant.label);\n  const geneticBalance = raw.content?.geneticBalance;\n\n  if (\n    !description &&\n    !keyFacts &&\n    !sections &&\n    !facts &&\n    !effects &&\n    !variants &&\n    !geneticBalance\n  )\n    return undefined;\n\n  return {\n    description,\n    keyFacts,\n    sections,\n    subtitle,\n    facts,\n    effects,\n    variants: variants?.map((variant) => ({\n      label: variant.label ?? \"\",\n      priceCents: variant.priceCents ?? 0,\n    })),\n    geneticBalance,\n  };\n}\n\nfunction normalizeProduct(raw: RawProduct): ProductDetails {\n  const id =\n    raw.id ||\n    raw._id ||\n    raw.uuid ||\n    raw.productId ||\n    raw.product_id ||\n    raw.product?.id ||\n    raw.product?.uuid ||\n    raw.slug ||\n    \"\";\n  const slug = raw.slug;\n  const name = raw.name || raw.title || \"Product\";\n\n  const normalizedContent = normalizeContent(raw);\n  const factsFromFilters = normalizeFactsFromFilters(raw.filters);\n  const balanceFromFilters = normalizeGeneticBalanceFromFilters(raw.filters);\n\n  const mergedContent =\n    normalizedContent || factsFromFilters || balanceFromFilters\n      ? {\n          ...(normalizedContent ?? {}),\n          facts:\n            normalizedContent?.facts || factsFromFilters\n              ? {\n                  ...(normalizedContent?.facts ?? {}),\n                  ...(factsFromFilters ?? {}),\n                }\n              : undefined,\n          geneticBalance:\n            normalizedContent?.geneticBalance || balanceFromFilters\n              ? {\n                  ...(normalizedContent?.geneticBalance ?? {}),\n                  ...(balanceFromFilters ?? {}),\n                }\n              : undefined,\n        }\n      : undefined;\n\n  return {\n    id,\n    slug,\n    name,\n    content: mergedContent,\n    priceCents: normalizePriceCents(raw),\n    currency: normalizeCurrency(raw),\n    stockQty: raw.stockQty ?? raw.stock,\n    images: normalizeImages(raw.images, raw.image),\n    category: normalizeCategory(raw),\n    soldCount: raw.soldCount ?? raw.sold,\n    ratingAvg: raw.ratingAvg ?? raw.rating,\n    reviewCount: raw.reviewCount ?? raw.reviews,\n    filters: raw.filters ?? undefined,\n    createdAt: raw.createdAt,\n    updatedAt: raw.updatedAt,\n  };\n}\n\nfunction normalizeListResponse(data: unknown): ProductListResponse {\n  if (Array.isArray(data)) {\n    return {\n      page: 1,\n      limit: data.length,\n      total: data.length,\n      items: data.map((item) => normalizeProduct(item as RawProduct)),\n    };\n  }\n\n  const payload = data as\n    | {\n        page?: number;\n        limit?: number;\n        total?: number;\n        items?: RawProduct[];\n        data?:\n          | RawProduct[]\n          | {\n              items?: RawProduct[];\n              total?: number;\n              page?: number;\n              limit?: number;\n            };\n        meta?: { total?: number; page?: number; limit?: number };\n      }\n    | undefined;\n\n  if (payload?.items) {\n    return {\n      page: payload.page ?? 1,\n      limit: payload.limit ?? payload.items.length,\n      total: payload.total ?? payload.items.length,\n      items: payload.items.map((item) => normalizeProduct(item)),\n    };\n  }\n\n  if (Array.isArray(payload?.data)) {\n    return {\n      page: payload?.page ?? 1,\n      limit: payload?.limit ?? payload.data.length,\n      total: payload?.total ?? payload.data.length,\n      items: payload.data.map((item) => normalizeProduct(item)),\n    };\n  }\n\n  if (payload?.data && Array.isArray(payload.data.items)) {\n    return {\n      page: payload.data.page ?? payload.page ?? 1,\n      limit: payload.data.limit ?? payload.limit ?? payload.data.items.length,\n      total: payload.data.total ?? payload.total ?? payload.data.items.length,\n      items: payload.data.items.map((item) => normalizeProduct(item)),\n    };\n  }\n\n  return {\n    page: 1,\n    limit: 0,\n    total: 0,\n    items: [],\n  };\n}\n\nexport async function fetchProducts(\n  query: ProductQuery,\n  init?: FetchInit,\n): Promise<ProductListResponse> {\n  const params = new URLSearchParams();\n  params.set(\"page\", String(query.page));\n  params.set(\"limit\", String(query.limit));\n  if (query.q) params.set(\"q\", query.q);\n  if (query.category) params.set(\"category\", query.category);\n  if (query.minPrice !== undefined)\n    params.set(\"minPrice\", String(query.minPrice));\n  if (query.maxPrice !== undefined)\n    params.set(\"maxPrice\", String(query.maxPrice));\n  if (query.sort) params.set(\"sort\", query.sort);\n  if (query.filters) {\n    Object.entries(query.filters).forEach(([key, value]) => {\n      if (value === undefined || value === null || value === \"\") return;\n      params.set(key, String(value));\n    });\n  }\n\n  const response = await fetch(`${getBaseUrl()}/products?${params.toString()}`, {\n    ...init,\n  });\n\n  if (!response.ok) {\n    throw new Error(\"Failed to load products\");\n  }\n\n  const data = (await response.json()) as unknown;\n  return normalizeListResponse(data);\n}\n\nexport async function fetchAllProducts(\n  query?: Omit<ProductQuery, \"page\" | \"limit\">,\n  init?: FetchInit,\n): Promise<ProductListItem[]> {\n  const limit = 32;\n  let page = 1;\n  let total = 0;\n  const items: ProductListItem[] = [];\n\n  do {\n    const response = await fetchProducts(\n      {\n        page,\n        limit,\n        q: query?.q,\n        category: query?.category,\n        minPrice: query?.minPrice,\n        maxPrice: query?.maxPrice,\n        sort: query?.sort,\n        filters: query?.filters,\n      },\n      init,\n    );\n\n    items.push(...response.items);\n    total = response.total;\n    page += 1;\n  } while (items.length < total);\n\n  return items;\n}\n\nexport async function fetchProductById(slug: string, init?: FetchInit) {\n  const response = await fetch(`${getBaseUrl()}/products/${slug}`, {\n    ...init,\n  });\n\n  if (!response.ok) {\n    throw new Error(\"Failed to load product\");\n  }\n\n  const data = (await response.json()) as RawProduct | { data?: RawProduct };\n  const rawProduct =\n    (data as { data?: RawProduct }).data ?? (data as RawProduct);\n  return normalizeProduct(rawProduct);\n}\n\nexport function getPrimaryImageUrl(images?: ProductImage[]) {\n  if (!images || images.length === 0) return \"\";\n  return images.slice().sort((a, b) => a.sortOrder - b.sortOrder)[0]?.url ?? \"\";\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1040, "column": 0}, "map": {"version":3,"sources":["file:///Users/yarik/Documents/GitHub/EVERLAVE_B2C/frontend/app/%28shop%29/seeds/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport FilterDropdown from \"@/components/seeds/FilterDropdown\";\nimport ProductCard from \"@/components/ui/ProductCard\";\nimport {\n  fetchCategories,\n  fetchCategoryFilters,\n  type CategoryFilter,\n  type CategoryItem,\n} from \"@/services/categories\";\nimport {\n  fetchAllProducts,\n  formatPrice,\n  getPrimaryImageUrl,\n} from \"@/services/products\";\n\nconst filterOptions = {\n  sorting: [\n    { label: \"Featured\", value: \"featured\" },\n    { label: \"Price: Low to High\", value: \"price-asc\" },\n    { label: \"Price: High to Low\", value: \"price-desc\" },\n  ],\n  price: [],\n};\n\ntype SeedCardItem = {\n  productId: string;\n  slug: string;\n  title: string;\n  description: string;\n  price: string;\n  imageUrl?: string;\n  category?: string;\n  priceValue?: number;\n  text?: string;\n  createdAt?: string;\n  soldCount?: number;\n  filters?: Record<string, string>;\n  facts?: {\n    yield?: string;\n    seedType?: string;\n    thcLevel?: string;\n    floweringCycle?: string;\n    flavorAroma?: string;\n    [key: string]: string | undefined;\n  };\n  geneticBalance?: Record<string, number | undefined>;\n};\n\nconst sortMap: Record<string, string | undefined> = {\n  featured: \"createdAt:desc\",\n  \"price-asc\": \"price:asc\",\n  \"price-desc\": \"price:desc\",\n};\n\nfunction getPriceValue(price: string) {\n  const numeric = Number(price.replace(\"€\", \"\").trim());\n  return Number.isNaN(numeric) ? 0 : numeric;\n}\n\nfunction getTextValue(item: SeedCardItem) {\n  if (item.text) return item.text;\n  return `${item.title} ${item.description}`.toLowerCase();\n}\n\nfunction toTitleCase(value: string) {\n  return value\n    .replace(/-/g, \" \")\n    .replace(/\\b\\w/g, (char) => char.toUpperCase());\n}\n\nfunction slugifyFilterKey(value: string) {\n  return value\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-+|-+$/g, \"\");\n}\n\nfunction extractNumbers(value?: string | number) {\n  if (typeof value === \"number\") return [value];\n  if (!value) return [];\n  const matches = value.match(/(\\d+(\\.\\d+)?)/g);\n  if (!matches) return [];\n  return matches.map((match) => Number(match)).filter((num) => Number.isFinite(num));\n}\n\nfunction toRange(value?: string | number) {\n  const numbers = extractNumbers(value);\n  if (numbers.length === 0) return undefined;\n  if (numbers.length === 1) return { min: numbers[0], max: numbers[0] };\n  return { min: Math.min(...numbers), max: Math.max(...numbers) };\n}\n\nfunction getFilterRange(item: SeedCardItem, slug: string) {\n  const facts = item.facts;\n  const balance = item.geneticBalance ?? {};\n\n  if (slug === \"thc\") return toRange(facts?.thcLevel);\n  if (slug === \"yield\") return toRange(facts?.yield);\n  if (slug === \"cycle\") return toRange(facts?.floweringCycle);\n  if (slug === \"height\") return toRange(facts?.height ?? facts?.plantHeight);\n  if (slug === \"indica\")\n    return toRange(\n      balance.indica ?? balance[\"ba\"] ?? balance[\"indica\"] ?? balance[\"Indica\"],\n    );\n  if (slug === \"sativa\")\n    return toRange(\n      balance.sativa ?? balance[\"abo\"] ?? balance[\"sativa\"] ?? balance[\"Sativa\"],\n    );\n\n  const fallback =\n    facts?.[slug] ??\n    (typeof balance[slug] === \"number\" ? balance[slug] : undefined);\n  return toRange(fallback);\n}\n\nconst selectorOptionsBySlug: Record<\n  string,\n  Array<{ label: string; min?: number; max?: number }>\n> = {\n  thc: [\n    { label: \"0–10%\", min: 0, max: 10 },\n    { label: \"10–20%\", min: 10, max: 20 },\n    { label: \"20–30%\", min: 20, max: 30 },\n    { label: \"30%+\", min: 30 },\n  ],\n  yield: [\n    { label: \"0–400 g/m²\", min: 0, max: 400 },\n    { label: \"400–500 g/m²\", min: 400, max: 500 },\n    { label: \"500–650 g/m²\", min: 500, max: 650 },\n    { label: \"650+ g/m²\", min: 650 },\n  ],\n  height: [\n    { label: \"0–60 cm\", min: 0, max: 60 },\n    { label: \"60–120 cm\", min: 60, max: 120 },\n    { label: \"120–180 cm\", min: 120, max: 180 },\n    { label: \"180+ cm\", min: 180 },\n  ],\n  cycle: [\n    { label: \"0–8 weeks\", min: 0, max: 8 },\n    { label: \"8–10 weeks\", min: 8, max: 10 },\n    { label: \"10–12 weeks\", min: 10, max: 12 },\n    { label: \"12+ weeks\", min: 12 },\n  ],\n  indica: [\n    { label: \"0–40%\", min: 0, max: 40 },\n    { label: \"40–60%\", min: 40, max: 60 },\n    { label: \"60–100%\", min: 60, max: 100 },\n  ],\n  sativa: [\n    { label: \"0–40%\", min: 0, max: 40 },\n    { label: \"40–60%\", min: 40, max: 60 },\n    { label: \"60–100%\", min: 60, max: 100 },\n  ],\n};\n\nexport default function SeedsPage() {\n  const router = useRouter();\n  const [openFilter, setOpenFilter] = useState<string | null>(null);\n  const [sorting, setSorting] = useState(\"\");\n  const [minPrice, setMinPrice] = useState(\"\");\n  const [maxPrice, setMaxPrice] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [categories, setCategories] = useState<CategoryItem[]>([]);\n  const [categorySelection, setCategorySelection] = useState(\"\");\n  const [categoryFilters, setCategoryFilters] = useState<CategoryFilter[]>([]);\n  const [filtersLoading, setFiltersLoading] = useState(false);\n  const [filtersError, setFiltersError] = useState(\"\");\n  const [filterValues, setFilterValues] = useState<\n    Record<string, { min?: string; max?: string }>\n  >({});\n  const [filterSelections, setFilterSelections] = useState<Record<string, string>>(\n    {},\n  );\n  const [multiSelections, setMultiSelections] = useState<Record<string, string[]>>(\n    {},\n  );\n  const [currentPage, setCurrentPage] = useState(1);\n  const [items, setItems] = useState<SeedCardItem[]>([]);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [categoryParam, setCategoryParam] = useState(\"\");\n  const filterKey = useMemo(() => JSON.stringify(filterValues), [filterValues]);\n  const pageTitle = categoryParam ? toTitleCase(categoryParam) : \"All Products\";\n  const breadcrumbLabel = categoryParam ? pageTitle : \"All Categories\";\n\n  useEffect(() => {\n    const syncCategoryFromUrl = () => {\n      const value =\n        new URLSearchParams(window.location.search).get(\"category\")?.toLowerCase() ??\n        \"\";\n      setCategoryParam(value);\n    };\n\n    syncCategoryFromUrl();\n    window.addEventListener(\"popstate\", syncCategoryFromUrl);\n    return () => window.removeEventListener(\"popstate\", syncCategoryFromUrl);\n  }, []);\n\n  useEffect(() => {\n    const handleClick = (event: MouseEvent) => {\n      const target = event.target as HTMLElement;\n      if (!target.closest(\"[data-filter-root]\")) {\n        setOpenFilter(null);\n      }\n    };\n    document.addEventListener(\"click\", handleClick);\n    return () => document.removeEventListener(\"click\", handleClick);\n  }, []);\n\n  useEffect(() => {\n    const timer = window.setTimeout(() => {\n      setSearchQuery(search.trim());\n    }, 300);\n    return () => window.clearTimeout(timer);\n  }, [search]);\n\n  useEffect(() => {\n    let mounted = true;\n    fetchCategories()\n      .then((data) => {\n        if (!mounted) return;\n        setCategories(data);\n      })\n      .catch(() => {\n        if (!mounted) return;\n        setCategories([]);\n      });\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    setCategorySelection(categoryParam);\n  }, [categoryParam]);\n\n\n  useEffect(() => {\n    let mounted = true;\n    if (!categoryParam) {\n      setCategoryFilters([]);\n      setFilterValues({});\n      setFilterSelections({});\n      setMultiSelections({});\n      setFiltersError(\"\");\n      setFiltersLoading(false);\n      return;\n    }\n\n    setFiltersLoading(true);\n    setFiltersError(\"\");\n    fetchCategoryFilters(categoryParam)\n      .then((filters) => {\n        if (!mounted) return;\n        setCategoryFilters(filters);\n        setFiltersError(\"\");\n      })\n      .catch(() => {\n        if (!mounted) return;\n        setCategoryFilters([]);\n        setFiltersError(\"No filters available for this category.\");\n      })\n      .finally(() => {\n        if (!mounted) return;\n        setFiltersLoading(false);\n      });\n\n    return () => {\n      mounted = false;\n    };\n  }, [categoryParam]);\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [\n    sorting,\n    minPrice,\n    maxPrice,\n    searchQuery,\n    categoryParam,\n    filterKey,\n    filterSelections,\n    multiSelections,\n  ]);\n\n  const filterOptionsBySlug = useMemo(() => {\n    const optionsMap: Record<string, Set<string>> = {};\n    categoryFilters.forEach((filter) => {\n      optionsMap[filter.slug] = new Set<string>();\n    });\n\n    items.forEach((item) => {\n      const filters = item.filters ?? {};\n      Object.entries(filters).forEach(([key, rawValue]) => {\n        const slug = slugifyFilterKey(key);\n        if (!(slug in optionsMap)) return;\n        const value = rawValue?.toString().trim();\n        if (!value || value.toLowerCase() === \"n/a\") return;\n        if (value.includes(\",\")) {\n          value\n            .split(\",\")\n            .map((entry) => entry.trim())\n            .filter(Boolean)\n            .forEach((entry) => optionsMap[slug].add(entry));\n        } else {\n          optionsMap[slug].add(value);\n        }\n      });\n    });\n\n    return Object.fromEntries(\n      Object.entries(optionsMap).map(([slug, set]) => [\n        slug,\n        Array.from(set),\n      ]),\n    );\n  }, [items, categoryFilters]);\n\n  const priceRange = useMemo(() => {\n    return {\n      min: minPrice ? Number(minPrice) : undefined,\n      max: maxPrice ? Number(maxPrice) : undefined,\n    };\n  }, [minPrice, maxPrice]);\n\n  useEffect(() => {\n    let isMounted = true;\n\n    const loadProducts = async () => {\n      setLoading(true);\n      setError(\"\");\n      try {\n        const filtersQuery: Record<string, string | number | undefined> = {};\n\n        if (categoryFilters.length > 0) {\n          categoryFilters.forEach((filter) => {\n            const slug = filter.slug;\n            if (filter.type === \"range\" || filter.type === \"number\") {\n              const value = filterValues[slug];\n              if (value?.min) filtersQuery[`${slug}Min`] = value.min;\n              if (value?.max) filtersQuery[`${slug}Max`] = value.max;\n              return;\n            }\n\n            if (filter.type === \"multi\") {\n              const selectedValues = multiSelections[slug];\n              if (selectedValues && selectedValues.length > 0) {\n                filtersQuery[slug] = selectedValues.join(\",\");\n              }\n              return;\n            }\n\n            const selectedValue = filterSelections[slug];\n            if (selectedValue) {\n              if (filter.type === \"boolean\") {\n                const normalized = selectedValue.toLowerCase();\n                filtersQuery[slug] =\n                  normalized === \"yes\" || normalized === \"true\" ? \"true\" : \"false\";\n              } else {\n                filtersQuery[slug] = selectedValue;\n              }\n            }\n          });\n        }\n\n        const items = await fetchAllProducts({\n          q: searchQuery || undefined,\n          category: categoryParam || undefined,\n          sort: sortMap[sorting],\n          minPrice:\n            priceRange.min !== undefined\n              ? Math.round(priceRange.min * 100)\n              : undefined,\n          maxPrice:\n            priceRange.max !== undefined\n              ? Math.round(priceRange.max * 100)\n              : undefined,\n          filters: filtersQuery,\n        });\n\n        if (!isMounted) return;\n\n        const mapped = items\n          .filter((item): item is typeof item & { slug: string } =>\n            Boolean(item.slug),\n          )\n          .map((item) => ({\n            productId: item.slug,\n            slug: item.slug,\n            title: item.name,\n            description: item.content?.description ?? \"Premium product\",\n            price: formatPrice(item.priceCents, item.currency),\n            imageUrl: getPrimaryImageUrl(item.images),\n            category: item.category?.slug ?? item.category?.name,\n            priceValue: item.priceCents / 100,\n            text: `${item.name} ${item.content?.description ?? \"\"}`.toLowerCase(),\n            createdAt: item.createdAt,\n            soldCount: item.soldCount ?? 0,\n            facts: item.content?.facts,\n            geneticBalance: item.content?.geneticBalance,\n            filters: item.filters,\n          }));\n\n        setItems(mapped);\n        setTotal(mapped.length);\n      } catch {\n        if (!isMounted) return;\n        setItems([]);\n        setTotal(0);\n        setError(\"Failed to load products.\");\n      } finally {\n        if (isMounted) setLoading(false);\n      }\n    };\n\n    loadProducts();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [\n    sorting,\n    priceRange,\n    categoryParam,\n    searchQuery,\n    categoryFilters,\n    filterValues,\n    filterSelections,\n    multiSelections,\n  ]);\n\n  const filteredItems = items;\n\n  const showSkeletons = loading && items.length === 0;\n\n  const orderedItems = useMemo(() => {\n    if (filteredItems.length === 0) return [];\n\n    const byDate = [...filteredItems].sort((a, b) => {\n      const aDate = a.createdAt ? Date.parse(a.createdAt) : 0;\n      const bDate = b.createdAt ? Date.parse(b.createdAt) : 0;\n      return bDate - aDate;\n    });\n    const newest = byDate.slice(0, 4);\n\n    const remainingAfterNew = filteredItems.filter(\n      (item) => !newest.some((newItem) => newItem.productId === item.productId),\n    );\n    const popular = [...remainingAfterNew]\n      .sort((a, b) => (b.soldCount ?? 0) - (a.soldCount ?? 0))\n      .slice(0, 4);\n\n    const rest = remainingAfterNew.filter(\n      (item) => !popular.some((popItem) => popItem.productId === item.productId),\n    );\n\n    return [...newest, ...popular, ...rest];\n  }, [filteredItems]);\n\n  const totalPages = 1;\n\n  return (\n    <div className=\"bg-pr_dg text-pr_w\">\n      <section className=\"w-full px-4 pt-[120px] pb-24 sm:px-6 md:px-8 lg:px-12 xl:px-[130px]\">\n        <p className=\"text-xs text-pr_w/60\">\n          <Link href=\"/\" className=\"hover:text-pr_w\">\n            Home\n          </Link>{\" \"}\n          /{\" \"}\n          <Link href=\"/products\" className=\"hover:text-pr_w\">\n            {breadcrumbLabel}\n          </Link>\n        </p>\n        <h1 className=\"mt-2 text-3xl font-semibold\">{pageTitle}</h1>\n\n        <div\n          className=\"relative z-[120] mt-4 flex flex-wrap gap-2\"\n          data-filter-root\n          data-no-reveal=\"true\"\n        >\n          <FilterDropdown\n            id=\"category\"\n            label=\"Category\"\n            options={[\n              { label: \"All Categories\", value: \"\" },\n              ...categories.map((category) => ({\n                label: category.name,\n                value: category.slug,\n              })),\n            ]}\n            selected={categorySelection}\n            open={openFilter === \"category\"}\n            onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n            onSelect={(id, value) => {\n              setCategorySelection(value);\n              const params = new URLSearchParams(window.location.search);\n              if (value) {\n                params.set(\"category\", value);\n              } else {\n                params.delete(\"category\");\n              }\n              setCategoryParam(value.toLowerCase());\n              router.push(`/products${params.toString() ? `?${params}` : \"\"}`);\n              setOpenFilter(null);\n            }}\n            placeholder=\"Category\"\n          />\n          <FilterDropdown\n            id=\"sorting\"\n            label=\"Sorting\"\n            options={filterOptions.sorting}\n            selected={sorting}\n            open={openFilter === \"sorting\"}\n            onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n            onSelect={(id, value) => {\n              setSorting(value);\n              setOpenFilter(null);\n            }}\n            placeholder=\"Sorting\"\n          />\n          <FilterDropdown\n            id=\"price\"\n            label=\"Price\"\n            options={filterOptions.price}\n            selected=\"\"\n            open={openFilter === \"price\"}\n            onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n            onSelect={() => null}\n            placeholder=\"Price\"\n            variant=\"price\"\n            minPrice={minPrice}\n            maxPrice={maxPrice}\n            onMinPriceChange={(value) => {\n              setMinPrice(value);\n            }}\n            onMaxPriceChange={(value) => {\n              setMaxPrice(value);\n            }}\n          />\n          {!categoryParam ? (\n            <span className=\"flex items-center text-xs text-pr_w/60\">\n              Select a category to see more filters\n            </span>\n          ) : filtersLoading ? (\n            <span className=\"flex items-center text-xs text-pr_w/60\">\n              Loading filters...\n            </span>\n          ) : categoryFilters.length === 0 ? (\n            <span className=\"flex items-center text-xs text-pr_w/60\">\n              {filtersError || \"No filters for this category.\"}\n            </span>\n          ) : null}\n          {categoryFilters.map((filter) => (\n            (() => {\n              const selectorOptions = selectorOptionsBySlug[filter.slug];\n              const derivedOptions = filterOptionsBySlug[filter.slug] ?? [];\n\n              const apiOptions =\n                filter.options?.map((option) => option.value) ?? [];\n\n              if (filter.type === \"multi\") {\n                const options =\n                  apiOptions.length > 0\n                    ? apiOptions\n                    : derivedOptions.length > 0\n                      ? derivedOptions\n                      : selectorOptions?.map((option) => option.label) ?? [];\n                return (\n                  <FilterDropdown\n                    key={filter.slug}\n                    id={filter.slug}\n                    label={filter.name}\n                    options={options.map((option) => ({\n                      label: option,\n                      value: option,\n                    }))}\n                    selected=\"\"\n                    selectedValues={multiSelections[filter.slug] ?? []}\n                    open={openFilter === filter.slug}\n                    onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n                    onSelect={() => null}\n                    onToggleValue={(id, value) => {\n                      setMultiSelections((prev) => {\n                        const current = prev[filter.slug] ?? [];\n                        const exists = current.includes(value);\n                        const next = exists\n                          ? current.filter((entry) => entry !== value)\n                          : [...current, value];\n                        return { ...prev, [filter.slug]: next };\n                      });\n                      setOpenFilter(null);\n                    }}\n                    placeholder={filter.name}\n                    multi\n                  />\n                );\n              }\n\n              if (filter.type === \"boolean\") {\n                const options =\n                  apiOptions.length > 0\n                    ? apiOptions\n                    : derivedOptions.length > 0\n                      ? derivedOptions\n                      : [\"Yes\", \"No\"];\n                return (\n                  <FilterDropdown\n                    key={filter.slug}\n                    id={filter.slug}\n                    label={filter.name}\n                    options={options.map((option) => ({\n                      label: option,\n                      value: option,\n                    }))}\n                    selected={filterSelections[filter.slug] ?? \"\"}\n                    open={openFilter === filter.slug}\n                    onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n                    onSelect={(id, value) => {\n                      setFilterSelections((prev) => ({ ...prev, [filter.slug]: value }));\n                      setOpenFilter(null);\n                    }}\n                    placeholder={filter.name}\n                  />\n                );\n              }\n\n              if (filter.type === \"select\") {\n                const options =\n                  apiOptions.length > 0\n                    ? apiOptions\n                    : derivedOptions.length > 0\n                      ? derivedOptions\n                      : selectorOptions?.map((option) => option.label) ?? [];\n                return (\n                  <FilterDropdown\n                    key={filter.slug}\n                    id={filter.slug}\n                    label={filter.name}\n                    options={options.map((option) => ({\n                      label: option,\n                      value: option,\n                    }))}\n                    selected={filterSelections[filter.slug] ?? \"\"}\n                    open={openFilter === filter.slug}\n                    onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n                    onSelect={(id, value) => {\n                      setFilterSelections((prev) => ({\n                        ...prev,\n                        [filter.slug]: value,\n                      }));\n                      setOpenFilter(null);\n                    }}\n                    placeholder={filter.name}\n                  />\n                );\n              }\n\n              if (filter.type === \"number\") {\n                return (\n                  <FilterDropdown\n                    key={filter.slug}\n                    id={filter.slug}\n                    label={filter.name}\n                    options={[]}\n                    selected=\"\"\n                    open={openFilter === filter.slug}\n                    onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n                    onSelect={() => null}\n                    placeholder={filter.name}\n                    variant=\"number\"\n                    minPrice={filterValues[filter.slug]?.min ?? \"\"}\n                    onMinPriceChange={(value) =>\n                      setFilterValues((prev) => ({\n                        ...prev,\n                        [filter.slug]: {\n                          ...prev[filter.slug],\n                          min: value,\n                        },\n                      }))\n                    }\n                    inputSuffix={filter.name.includes(\"%\") ? \"%\" : \"\"}\n                  />\n                );\n              }\n\n              if (selectorOptions && selectorOptions.length > 0) {\n                return (\n                  <FilterDropdown\n                    key={filter.slug}\n                    id={filter.slug}\n                    label={filter.name}\n                    options={selectorOptions.map((option) => ({\n                      label: option.label,\n                      value: option.label,\n                    }))}\n                    selected={filterSelections[filter.slug] ?? \"\"}\n                    open={openFilter === filter.slug}\n                    onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n                    onSelect={(id, value) => {\n                      setFilterSelections((prev) => ({\n                        ...prev,\n                        [filter.slug]: value,\n                      }));\n                      if (!value) {\n                        setFilterValues((prev) => ({\n                          ...prev,\n                          [filter.slug]: {},\n                        }));\n                        setOpenFilter(null);\n                        return;\n                      }\n                      const match = selectorOptions.find(\n                        (option) => option.label === value,\n                      );\n                      setFilterValues((prev) => ({\n                        ...prev,\n                        [filter.slug]: {\n                          min: match?.min?.toString(),\n                          max: match?.max?.toString(),\n                        },\n                      }));\n                      setOpenFilter(null);\n                    }}\n                    placeholder={filter.name}\n                  />\n                );\n              }\n\n              return (\n                <FilterDropdown\n                  key={filter.slug}\n                  id={filter.slug}\n                  label={filter.name}\n                  options={[]}\n                  selected=\"\"\n                  open={openFilter === filter.slug}\n                  onToggle={(id) => setOpenFilter(openFilter === id ? null : id)}\n                  onSelect={() => null}\n                  placeholder={filter.name}\n                  variant=\"range\"\n                  minPrice={filterValues[filter.slug]?.min ?? \"\"}\n                  maxPrice={filterValues[filter.slug]?.max ?? \"\"}\n                  onMinPriceChange={(value) =>\n                    setFilterValues((prev) => ({\n                      ...prev,\n                      [filter.slug]: {\n                        ...prev[filter.slug],\n                        min: value,\n                      },\n                    }))\n                  }\n                  onMaxPriceChange={(value) =>\n                    setFilterValues((prev) => ({\n                      ...prev,\n                      [filter.slug]: {\n                        ...prev[filter.slug],\n                        max: value,\n                      },\n                    }))\n                  }\n                  inputSuffix={filter.name.includes(\"%\") ? \"%\" : \"\"}\n                />\n              );\n            })()\n          ))}\n          <div className=\"relative flex min-w-[180px] flex-1 items-center rounded-full bg-pr_w px-4 py-2 text-xs text-pr_dg sm:min-w-[220px] sm:max-w-[260px]\">\n            <input\n              type=\"text\"\n              value={search}\n              onChange={(event) => setSearch(event.target.value)}\n              placeholder=\"Search products\"\n              className=\"w-full bg-transparent text-xs font-semibold text-pr_dg outline-none placeholder:text-pr_dg/50\"\n            />\n          </div>\n        </div>\n\n        {error ? (\n          <p className=\"mt-4 text-xs text-pr_y/90\">{error}</p>\n        ) : null}\n\n        <div className=\"mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-4\">\n          {showSkeletons\n            ? Array.from({ length: 8 }).map((_, index) => (\n                <div\n                  key={`product-skeleton-${index}`}\n                  className=\"h-[520px] rounded-2xl bg-white/5\"\n                />\n              ))\n            : orderedItems.map((seed) => (\n                <ProductCard\n                  key={seed.slug}\n                  title={seed.title}\n                  description={seed.description}\n                  price={seed.price}\n                  isNew={false}\n                  productId={seed.productId}\n                  href={`/products/${seed.slug}`}\n                  imageUrl={seed.imageUrl}\n                />\n              ))}\n        </div>\n\n        {!loading && orderedItems.length === 0 ? (\n          <p className=\"mt-6 text-sm text-pr_w/70\">No products found.</p>\n        ) : null}\n\n        {totalPages > 1 ? (\n          <div className=\"mt-12 flex items-center justify-center gap-4\">\n            <button\n              type=\"button\"\n              onClick={() =>\n                setCurrentPage((prev) => Math.max(1, prev - 1))\n              }\n              disabled={currentPage === 1 || totalPages === 1}\n              className=\"flex h-12 w-20 items-center justify-center rounded-full bg-pr_w text-pr_dg transition disabled:opacity-50\"\n            >\n              ←\n            </button>\n            <div className=\"flex items-center rounded-full bg-pr_w px-3 py-2 text-sm text-pr_dg\">\n              {Array.from({ length: totalPages }, (_, index) => index + 1).map(\n                (page) => (\n                  <button\n                    key={page}\n                    type=\"button\"\n                    onClick={() => setCurrentPage(page)}\n                    className={`mx-1 flex h-10 w-16 items-center justify-center rounded-full transition ${\n                      page === currentPage\n                        ? \"bg-pr_dg text-pr_w\"\n                        : \"text-pr_dg/70 hover:text-pr_dg\"\n                    }`}\n                  >\n                    {page}\n                  </button>\n                ),\n              )}\n            </div>\n            <button\n              type=\"button\"\n              onClick={() =>\n                setCurrentPage((prev) => Math.min(totalPages, prev + 1))\n              }\n              disabled={currentPage === totalPages || totalPages === 1}\n              className=\"flex h-12 w-20 items-center justify-center rounded-full bg-pr_w text-pr_dg transition disabled:opacity-50\"\n            >\n              →\n            </button>\n          </div>\n        ) : null}\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}